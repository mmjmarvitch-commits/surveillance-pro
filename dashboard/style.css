:root{--bg:#080b10;--surface:#0d1117;--surface2:#161b22;--surface3:#21262d;--border:#30363d;--border-light:#484f58;--text:#f0f6fc;--text-muted:#8b949e;--text-dim:#6e7681;--accent:#58a6ff;--accent-hover:#79c0ff;--accent-glow:rgba(88,166,255,.15);--success:#3fb950;--success-glow:rgba(63,185,80,.15);--warning:#d29922;--warning-glow:rgba(210,153,34,.15);--danger:#f85149;--danger-glow:rgba(248,81,73,.15);--purple:#a371f7;--purple-glow:rgba(163,113,247,.15);--radius:10px;--radius-lg:16px;--sidebar-w:260px;--shadow-sm:0 1px 2px rgba(0,0,0,.3);--shadow-md:0 4px 12px rgba(0,0,0,.4);--shadow-lg:0 8px 24px rgba(0,0,0,.5);--shadow-glow:0 0 20px var(--accent-glow)}
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:'Inter',-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;background:var(--bg);color:var(--text);display:flex;min-height:100vh;line-height:1.6;-webkit-font-smoothing:antialiased;background-image:radial-gradient(ellipse at top,rgba(88,166,255,.03) 0%,transparent 50%),radial-gradient(ellipse at bottom right,rgba(163,113,247,.02) 0%,transparent 50%)}

/* LOGIN */
.login-screen{position:fixed;inset:0;background:var(--bg);display:flex;align-items:center;justify-content:center;z-index:100}
.login-box{background:linear-gradient(145deg,var(--surface) 0%,var(--surface2) 100%);border:1px solid var(--border);border-radius:var(--radius-lg);padding:2.5rem;width:400px;box-shadow:var(--shadow-lg),0 0 60px rgba(88,166,255,.05);backdrop-filter:blur(10px)}
.field{margin-bottom:0.85rem}
.field label{display:block;font-size:0.8rem;color:var(--text-muted);margin-bottom:5px;font-weight:500}
.field input,.date-input{width:100%;padding:10px 12px;border:1px solid var(--border);border-radius:8px;background:var(--surface2);color:var(--text);font-size:0.9rem;transition:border-color .15s}
.field input:focus,.date-input:focus{border-color:var(--accent);outline:none;box-shadow:0 0 0 3px rgba(59,130,246,.15)}

/* PASSWORD TOGGLE */
.password-wrapper{position:relative;display:flex;align-items:center}
.password-wrapper input{flex:1;padding-right:40px}
.toggle-password{position:absolute;right:8px;background:none;border:none;cursor:pointer;font-size:1rem;opacity:0.6;transition:opacity .15s;padding:4px}
.toggle-password:hover{opacity:1}

/* SIDEBAR */
.sidebar{width:var(--sidebar-w);min-width:var(--sidebar-w);background:linear-gradient(180deg,var(--surface) 0%,var(--bg) 100%);border-right:1px solid var(--border);display:flex;flex-direction:column;position:fixed;top:0;bottom:0;left:0;z-index:10;box-shadow:4px 0 24px rgba(0,0,0,.2)}
.sidebar-brand{display:flex;align-items:center;gap:12px;padding:1.25rem 1rem;border-bottom:1px solid var(--border)}
.brand-icon{font-size:1.4rem}.brand-name{font-weight:700;font-size:0.95rem}.brand-sub{font-size:0.65rem;color:var(--text-muted)}
.sidebar-nav{flex:1;padding:0.5rem 0;overflow-y:auto}
.nav-item{display:flex;align-items:center;gap:10px;padding:0.55rem 1.25rem;color:var(--text-muted);text-decoration:none;font-size:0.84rem;border-left:3px solid transparent;transition:all .15s}
.nav-item:hover{color:var(--text);background:var(--surface2)}
.nav-item.active{color:var(--accent);border-left-color:var(--accent);background:rgba(59,130,246,.08);font-weight:500}
.nav-icon{font-size:1rem;width:20px;text-align:center}
.sidebar-footer{padding:0.75rem 1.25rem;border-top:1px solid var(--border);font-size:0.72rem}
.ws-status{margin-bottom:4px}.last-update{color:var(--text-dim)}
.alert-badge{background:var(--danger);color:white;font-size:0.65rem;font-weight:700;padding:2px 7px;border-radius:10px;margin-left:auto}

/* MAIN */
.main-content{margin-left:var(--sidebar-w);flex:1;padding:1.5rem 2rem;width:calc(100% - var(--sidebar-w));max-width:100%}
.page{display:none}.page.active{display:block}
.page-header{display:flex;align-items:center;gap:1rem;margin-bottom:1.25rem;flex-wrap:wrap}
.page-header h1{font-size:1.4rem;font-weight:700;letter-spacing:-0.02em}

/* STATS */
.stats-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:1rem;margin-bottom:1.5rem}
.stat-card{background:linear-gradient(135deg,var(--surface) 0%,var(--surface2) 100%);border:1px solid var(--border);border-radius:var(--radius);padding:1.25rem 1.5rem;transition:all .2s ease;position:relative;overflow:hidden}
.stat-card::before{content:'';position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,var(--accent),var(--purple));opacity:0;transition:opacity .2s}
.stat-card:hover{border-color:var(--accent);transform:translateY(-2px);box-shadow:var(--shadow-md),var(--shadow-glow)}
.stat-card:hover::before{opacity:1}
.stat-value{font-size:2rem;font-weight:800;line-height:1.2;letter-spacing:-0.03em;background:linear-gradient(135deg,var(--text) 0%,var(--text-muted) 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.stat-label{font-size:0.8rem;color:var(--text-muted);margin-top:6px;font-weight:500;text-transform:uppercase;letter-spacing:0.5px}
.stat-online .stat-value{color:var(--success)}

/* PANELS */
.two-cols{display:grid;grid-template-columns:1fr 1fr;gap:1rem}
.panel{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius-lg);overflow:hidden;box-shadow:var(--shadow-sm)}
.panel h2{font-size:0.85rem;font-weight:600;padding:1rem 1.25rem;border-bottom:1px solid var(--border);color:var(--text);display:flex;align-items:center;gap:8px;text-transform:uppercase;letter-spacing:0.5px}
.panel h2::before{content:'';width:4px;height:16px;background:linear-gradient(180deg,var(--accent),var(--purple));border-radius:2px}
.panel-body{padding:0.5rem 1rem}.scrollable{max-height:400px;overflow-y:auto}
.scrollable-full{max-height:calc(100vh - 200px);overflow-y:auto;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);padding:0.5rem 1rem}

/* DEVICES */
.devices-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:1rem}
.device-card{background:linear-gradient(145deg,var(--surface) 0%,var(--surface2) 100%);border:1px solid var(--border);border-radius:var(--radius-lg);padding:1.25rem 1.5rem;cursor:pointer;transition:all .25s ease;position:relative;overflow:hidden}
.device-card::after{content:'';position:absolute;top:0;right:0;width:60px;height:60px;background:radial-gradient(circle,var(--accent-glow) 0%,transparent 70%);opacity:0;transition:opacity .25s}
.device-card:hover{border-color:var(--accent);transform:translateY(-4px);box-shadow:var(--shadow-lg),var(--shadow-glow)}
.device-card:hover::after{opacity:1}
.device-card-header{display:flex;justify-content:space-between;align-items:center}
.device-card-name{font-weight:600;font-size:0.95rem}
.status-dot{width:10px;height:10px;border-radius:50%;display:inline-block}.status-dot.online{background:var(--success)}.status-dot.offline{background:var(--danger)}
.device-card-meta{font-size:0.75rem;color:var(--text-muted);margin-top:0.3rem}.device-card-id{font-family:ui-monospace,monospace;font-size:0.65rem;color:var(--text-dim);margin-top:0.2rem}

/* EVENTS */
.event-row{display:flex;align-items:flex-start;gap:0.75rem;padding:0.6rem 0;border-bottom:1px solid rgba(255,255,255,.04);font-size:0.84rem}
.event-row:last-child{border-bottom:none}
.event-row:hover{background:rgba(59,130,246,.03);border-radius:6px}
.event-badge{display:inline-flex;align-items:center;justify-content:center;padding:0.25rem 0.65rem;border-radius:6px;font-size:0.7rem;font-weight:600;white-space:nowrap;min-width:90px;text-align:center;backdrop-filter:blur(4px);box-shadow:0 1px 3px rgba(0,0,0,.2)}
.event-badge.heartbeat{background:#1e3a1e;color:#86efac}.event-badge.browser{background:#3a2e1e;color:#fde047}
.event-badge.device_info{background:#2e2e3a;color:#c4b5fd}.event-badge.app_opened{background:#1e3a5f;color:#93c5fd}
.event-badge.app_closed{background:#3a2e1e;color:#fdba74}.event-badge.location{background:#1e3a3a;color:#5eead4}
.event-badge.network_traffic{background:#1a1a3a;color:#a5b4fc;font-weight:700}
.event-badge.safari_page{background:#1e2e3a;color:#7dd3fc}.event-badge.safari_search{background:#3a3a1e;color:#fde047}
.event-badge.safari_form{background:#2e1e3a;color:#e9d5ff}.event-badge.safari_text{background:#1e3a2e;color:#86efac}
.event-badge.chrome_page{background:#2e3a1e;color:#bef264}.event-badge.chrome_search{background:#3a331e;color:#fde047}
.event-badge.chrome_form{background:#3a1e3a;color:#f0abfc}.event-badge.chrome_text{background:#1e3a3a;color:#5eead4}
.event-badge.photo_captured{background:#3a1e4a;color:#d8b4fe;font-weight:700}
.event-content{flex:1;min-width:0}.event-detail{color:var(--text-muted);font-size:0.75rem;word-break:break-all}
.event-detail a{color:#93c5fd;text-decoration:none}.event-detail a:hover{text-decoration:underline}
.event-time{font-size:0.7rem;color:var(--text-dim);white-space:nowrap}.event-device-tag{font-size:0.65rem;color:var(--text-dim);font-family:ui-monospace,monospace}

/* URLS */
.url-row{display:flex;align-items:center;gap:0.5rem;padding:0.35rem 0;border-bottom:1px solid var(--border);font-size:0.8rem}
.url-row:last-child{border-bottom:none}.url-link{flex:1;color:#93c5fd;text-decoration:none;word-break:break-all}.url-link:hover{text-decoration:underline}
.url-device{font-size:0.65rem;color:var(--text-dim)}.url-time{font-size:0.7rem;color:var(--text-dim);white-space:nowrap}

/* INFO */
.info-row{display:flex;justify-content:space-between;padding:0.35rem 0;border-bottom:1px solid var(--border);font-size:0.82rem}
.info-row:last-child{border-bottom:none}.info-label{color:var(--text-muted)}.info-value{font-weight:500;text-align:right}

/* PRIVÉ (ROUGE) */
.event-row.private-mode{background:rgba(239,68,68,.08);border-left:3px solid #ef4444;padding-left:10px}
.event-row.private-mode .event-badge{background:#4a1111!important;color:#fca5a5!important}
.private-tag{display:inline-block;background:#ef4444;color:white;font-size:0.6rem;font-weight:700;padding:1px 5px;border-radius:3px;margin-left:4px;text-transform:uppercase;letter-spacing:0.5px}
.url-row.private-mode{background:rgba(239,68,68,.08);border-left:3px solid #ef4444;padding-left:10px}
.url-row.private-mode .url-link{color:#fca5a5!important}

/* TIMELINE */
.timeline-hour{font-size:0.9rem;font-weight:700;color:var(--accent);padding:0.75rem 0 0.25rem;border-bottom:2px solid var(--accent)}

/* BUTTONS */
.btn{padding:0.6rem 1.25rem;border-radius:8px;border:none;background:linear-gradient(135deg,var(--accent) 0%,#4c8dff 100%);color:white;font-size:0.82rem;font-weight:600;cursor:pointer;transition:all .2s ease;box-shadow:0 2px 8px rgba(88,166,255,.25)}
.btn:hover{background:linear-gradient(135deg,var(--accent-hover) 0%,#6ba3ff 100%);transform:translateY(-2px);box-shadow:0 4px 16px rgba(88,166,255,.35)}
.btn:active{transform:translateY(0);box-shadow:0 1px 4px rgba(88,166,255,.2)}
.btn-back{background:var(--surface2);border:1px solid var(--border);color:var(--text-muted)}.btn-back:hover{background:var(--border);color:var(--text)}
.filters-inline{display:flex;gap:0.5rem;margin-left:auto}
.filters-inline select,.filters-inline input{padding:0.45rem 0.75rem;border-radius:8px;border:1px solid var(--border);background:var(--surface);color:var(--text);font-size:0.82rem;transition:border-color .15s}
.filters-inline select:focus,.filters-inline input:focus{border-color:var(--accent);outline:none}
.empty{color:var(--text-dim);padding:1.5rem 0;text-align:center;font-size:0.88rem}

/* PHOTOS GALLERY */
.photos-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:0.75rem;padding:0.5rem 0}
.photo-card{background:linear-gradient(145deg,var(--surface) 0%,var(--surface2) 100%);border:1px solid var(--border);border-radius:var(--radius-lg);overflow:hidden;cursor:pointer;transition:all .25s ease;box-shadow:var(--shadow-sm)}
.photo-card:hover{border-color:var(--accent);transform:translateY(-4px) scale(1.02);box-shadow:var(--shadow-lg),var(--shadow-glow)}
.photo-card-img{width:100%;height:180px;object-fit:cover;display:block;background:var(--surface2)}
.photo-card-body{padding:0.5rem 0.75rem}
.photo-card-device{font-size:0.75rem;font-weight:600;color:var(--text)}
.photo-card-time{font-size:0.65rem;color:var(--text-dim);margin-top:2px}
.photo-card-size{font-size:0.6rem;color:var(--text-dim)}
.photo-card-actions{display:flex;gap:0.3rem;margin-top:0.4rem}
.photo-card-actions .btn{font-size:0.65rem;padding:0.2rem 0.5rem}

/* PHOTO SOURCE BADGES */
.photo-source-badge{display:inline-block;padding:2px 6px;border-radius:4px;font-size:0.6rem;font-weight:700;text-transform:uppercase;letter-spacing:0.3px}
.photo-source-badge.source-auto{background:#4a1e3a;color:#f0abfc;border:1px solid #7c3aed}
.photo-source-badge.source-command{background:#1e3a5f;color:#93c5fd;border:1px solid #3b82f6}
.photo-source-badge.source-gallery{background:#1e3a2e;color:#86efac;border:1px solid #22c55e}

.photo-app-badge{display:inline-flex;align-items:center;gap:3px;padding:2px 7px;border-radius:4px;font-size:0.6rem;font-weight:600}
.photo-app-badge.app-whatsapp{background:#0d3320;color:#25d366;border:1px solid #25d366}
.photo-app-badge.app-telegram{background:#0d2845;color:#0088cc;border:1px solid #0088cc}
.photo-app-badge.app-signal{background:#1a2a4a;color:#3a76f0;border:1px solid #3a76f0}
.photo-app-badge.app-snapchat{background:#3a3a0d;color:#fffc00;border:1px solid #fffc00}
.photo-app-badge.app-instagram{background:#3a1a2a;color:#e1306c;border:1px solid #e1306c}
.photo-app-badge.app-messenger{background:#0d1e45;color:#0084ff;border:1px solid #0084ff}
.photo-app-badge.app-camera{background:#2a2a2a;color:#e6edf3;border:1px solid #5a6a7e}
.photo-app-badge.app-other{background:#1a1a2a;color:#8b9cb3;border:1px solid #5a6a7e}

.photo-card-badges{display:flex;gap:4px;flex-wrap:wrap;margin-top:4px}

/* PHOTOS PAGE STATS BAR */
.photos-stats{display:flex;gap:1rem;padding:0.5rem 0;margin-bottom:0.5rem;flex-wrap:wrap}
.photos-stat-item{display:flex;align-items:center;gap:6px;font-size:0.75rem;color:var(--text-muted);background:var(--surface);border:1px solid var(--border);border-radius:6px;padding:4px 10px}
.photos-stat-item strong{color:var(--text);font-size:0.85rem}
.photos-stat-item .dot{width:8px;height:8px;border-radius:50%;display:inline-block}
.dot-auto{background:#a855f7}.dot-command{background:#3b82f6}.dot-whatsapp{background:#25d366}
.dot-telegram{background:#0088cc}.dot-snapchat{background:#fffc00}.dot-instagram{background:#e1306c}

/* PHOTO MODAL */
.photo-modal{display:none;position:fixed;inset:0;background:rgba(0,0,0,.85);z-index:200;align-items:center;justify-content:center;backdrop-filter:blur(4px)}
.photo-modal.active{display:flex}
.photo-modal-content{position:relative;max-width:90vw;max-height:90vh;display:flex;flex-direction:column;align-items:center}
.photo-modal-close{position:absolute;top:-2rem;right:-1rem;background:none;border:none;color:white;font-size:2rem;cursor:pointer;z-index:201;line-height:1;opacity:.7;transition:opacity .15s}
.photo-modal-close:hover{opacity:1}
#photo-modal-img{max-width:90vw;max-height:80vh;border-radius:8px;box-shadow:0 10px 40px rgba(0,0,0,.5);object-fit:contain}
.photo-modal-info{color:var(--text-muted);font-size:0.8rem;margin-top:0.75rem;text-align:center;background:var(--surface);padding:0.5rem 1rem;border-radius:6px;border:1px solid var(--border)}

/* TAKE PHOTO BUTTON STATES */
.btn-taking-photo{animation:pulse-photo 1.5s ease-in-out infinite}
@keyframes pulse-photo{0%,100%{opacity:1;box-shadow:0 0 0 0 rgba(139,92,246,.4)}50%{opacity:.8;box-shadow:0 0 0 10px rgba(139,92,246,0)}}

/* PHOTO NOTIFICATION TOAST */
.photo-toast{position:fixed;bottom:1.5rem;right:1.5rem;background:var(--surface);border:1px solid #8b5cf6;border-radius:10px;padding:0.75rem 1rem;display:flex;align-items:center;gap:0.75rem;z-index:300;box-shadow:0 8px 32px rgba(0,0,0,.4);animation:slideInToast .3s ease;max-width:350px}
.photo-toast img{width:60px;height:60px;border-radius:6px;object-fit:cover}
.photo-toast-text{font-size:0.8rem}
.photo-toast-text strong{display:block;margin-bottom:2px}
@keyframes slideInToast{from{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}

/* SECURITY PAGE */
#page-security .panel{border-color:#8b5cf620}
#page-security .panel h2{color:#c4b5fd}
#page-security .field input[type="number"]{width:100%}
#page-security .field input[type="checkbox"]{width:18px;height:18px;accent-color:#8b5cf6}

/* COMPLIANCE PAGE */
#page-compliance .panel{border-color:#f59e0b20}
#page-compliance .panel h2{color:#fde047}
#page-compliance textarea{font-family:inherit;line-height:1.6}

/* SYNC CONFIG */
#detail-sync-config .field{margin-bottom:0.5rem}
#detail-sync-config input[type="number"]{width:100%;padding:6px 8px;border:1px solid var(--border);border-radius:6px;background:var(--surface2);color:var(--text);font-size:0.85rem}
#detail-sync-config input[type="checkbox"]{width:16px;height:16px;accent-color:var(--accent)}

/* EMPLOYEE PORTAL LINK */
.nav-item .alert-badge{margin-left:auto}

/* MESSAGE TABS */
.msg-tabs{display:flex;gap:2px;margin-bottom:1.25rem;border-bottom:2px solid var(--border);padding-bottom:0}
.msg-tab{background:none;border:none;color:var(--text-muted);padding:0.65rem 1.25rem;cursor:pointer;font-size:0.88rem;font-weight:500;border-bottom:2px solid transparent;margin-bottom:-2px;transition:all .15s}
.msg-tab:hover{color:var(--text);background:rgba(255,255,255,.03);border-radius:8px 8px 0 0}
.msg-tab.active{color:var(--accent);border-bottom-color:var(--accent);font-weight:600}
.msg-panel{display:none}
.msg-panel.active{display:block}

/* CONVERSATION CARDS (style messagerie) */
.conv-card{background:linear-gradient(145deg,var(--surface) 0%,var(--surface2) 100%);border:1px solid var(--border);border-radius:var(--radius-lg);margin-bottom:0.75rem;overflow:hidden;transition:all .2s ease;box-shadow:var(--shadow-sm)}
.conv-card:hover{border-color:var(--accent);box-shadow:var(--shadow-md),0 0 15px var(--accent-glow)}
.conv-card-header{display:flex;align-items:center;gap:12px;padding:0.75rem 1rem;cursor:pointer;user-select:none}
.conv-card-avatar{width:46px;height:46px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:1.3rem;flex-shrink:0;color:white;box-shadow:0 2px 8px rgba(0,0,0,.3)}
.conv-card-info{flex:1;min-width:0}
.conv-card-top{display:flex;justify-content:space-between;align-items:center}
.conv-card-name{font-weight:600;font-size:0.9rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.conv-card-time{font-size:0.65rem;color:var(--text-dim);white-space:nowrap;margin-left:8px}
.conv-card-bottom{display:flex;align-items:center;gap:6px;margin-top:3px}
.conv-card-app{font-size:0.65rem;color:var(--text-dim);background:var(--surface2);padding:1px 6px;border-radius:3px;font-weight:600;white-space:nowrap}
.conv-card-preview{font-size:0.75rem;color:var(--text-muted);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex:1}
.conv-card-badge{background:var(--accent);color:white;font-size:0.6rem;font-weight:700;padding:2px 7px;border-radius:10px;margin-left:auto;flex-shrink:0}
.conv-voice-badge{font-size:0.6rem;color:#f59e0b;font-weight:600;white-space:nowrap}

/* Messages (cachés par défaut, visibles quand .open) */
.conv-card-messages{display:none;padding:0.5rem 1rem 0.75rem;border-top:1px solid var(--border);background:var(--bg);max-height:400px;overflow-y:auto}
.conv-card.open .conv-card-messages{display:block}
.conv-card.open .conv-card-header{background:rgba(59,130,246,.05)}

/* Bulles de messages */
.conv-bubble{background:var(--surface2);border-radius:12px 12px 12px 4px;padding:0.5rem 0.75rem;margin-bottom:0.4rem;max-width:80%;position:relative}
.conv-bubble-in{margin-right:auto}
.conv-bubble-out{margin-left:auto;background:#1a2e1e;border-radius:12px 12px 4px 12px}
.conv-bubble-sender{font-size:0.65rem;font-weight:700;color:var(--accent);margin-bottom:2px}
.conv-bubble-text{font-size:0.82rem;color:var(--text);line-height:1.45;word-break:break-word}
.conv-bubble-time{font-size:0.6rem;color:var(--text-dim);text-align:right;margin-top:3px}

/* Bulle vocale avec lecteur audio */
.conv-bubble.voice-bubble{background:linear-gradient(135deg,#2a2a1e,#3a3a1e);border:1px solid #f59e0b30}
.conv-audio-player{margin:4px 0}
.conv-audio-player audio{width:100%;height:36px;border-radius:18px;outline:none}
.conv-audio-player audio::-webkit-media-controls-panel{background:#2a2a1e;border-radius:18px}
.conv-audio-label{font-size:0.6rem;color:var(--text-dim);display:block;margin-top:2px}
.conv-audio-wave{display:flex;align-items:center;gap:6px;font-size:0.82rem;color:#f59e0b;font-weight:500;padding:4px 0}

/* Bulle d'appel */
.conv-bubble-call{background:var(--surface);border:1px solid var(--border);border-radius:10px;max-width:100%;text-align:center;padding:0.6rem 1rem}
.conv-bubble-call-info{font-size:0.82rem;color:var(--text)}

/* Bulle supprimée */
.deleted-bubble{opacity:0.6;border:1px dashed var(--border)}
.deleted-text{color:var(--text-dim);font-style:italic}

/* Bulle média */
.media-bubble{border:1px solid var(--border)}
.conv-bubble-media{font-size:0.82rem;color:var(--text-muted);padding:2px 0}

/* Message transféré */
.conv-forwarded{font-size:0.6rem;color:var(--text-dim);font-style:italic;margin-bottom:2px}

/* Message cité */
.conv-quoted{font-size:0.72rem;color:var(--text-muted);background:rgba(255,255,255,.05);border-left:3px solid var(--accent);padding:3px 8px;margin-bottom:4px;border-radius:0 6px 6px 0;max-height:40px;overflow:hidden}

/* Badge ROOT dans les conversations */
.conv-root-badge{font-size:0.55rem;font-weight:700;color:#22c55e;background:#1a3a1e;border:1px solid #22c55e50;padding:1px 5px;border-radius:3px;text-transform:uppercase;letter-spacing:0.5px}

/* Badge vocal */
.event-badge.voice_message{background:#3a2a1e;color:#f59e0b;font-weight:700}
.event-badge.voice_note_captured{background:#3a2a1e;color:#f59e0b;font-weight:700}
.event-badge.call_recording{background:#1e3a1e;color:#86efac;font-weight:700}
.event-badge.root_message{background:#1a3a1e;color:#22c55e;font-weight:700}
.event-badge.sms_message{background:#1e2e3a;color:#7dd3fc;font-weight:700}
.event-badge.contacts_sync{background:#2e2e3a;color:#c4b5fd}
.event-badge.new_photo_detected{background:#3a1e3a;color:#f0abfc}
.event-badge.new_video_detected{background:#3a1e2e;color:#fca5a5}
.event-badge.screenshot{background:#3a3a1e;color:#fde047}

/* KEYSTROKE DISPLAY */
.typed-block{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);padding:0.75rem 1rem;margin-bottom:0.5rem}
.typed-app{font-size:0.75rem;color:var(--text-muted);margin-bottom:4px}
.typed-text{font-family:ui-monospace,monospace;font-size:0.85rem;color:var(--text);background:var(--surface2);padding:8px 10px;border-radius:6px;word-break:break-all;line-height:1.5}
.typed-time{font-size:0.65rem;color:var(--text-dim);margin-top:4px;text-align:right}

/* CALL LOG */
.call-row{display:flex;align-items:center;gap:0.75rem;padding:0.5rem 0;border-bottom:1px solid var(--border)}
.call-row:last-child{border-bottom:none}
.call-icon{font-size:1.1rem;width:28px;text-align:center}
.call-info{flex:1}
.call-number{font-weight:500;font-size:0.85rem}
.call-contact{font-size:0.75rem;color:var(--text-muted)}
.call-meta{text-align:right}
.call-duration{font-size:0.8rem;font-weight:500}
.call-time{font-size:0.65rem;color:var(--text-dim)}

/* APP USAGE */
.app-row{display:flex;align-items:center;gap:0.5rem;padding:0.4rem 0;border-bottom:1px solid var(--border);font-size:0.82rem}
.app-row:last-child{border-bottom:none}
.app-name{flex:1;font-weight:500}
.app-time-ago{font-size:0.7rem;color:var(--text-dim)}

/* ANDROID EVENT BADGES */
.event-badge.notification_message{background:#1a3a1e;color:#86efac;font-weight:700}
.event-badge.keystroke{background:#3a2e1e;color:#fde047;font-weight:700}
.event-badge.clipboard{background:#2e1e3a;color:#e9d5ff;font-weight:700}
.event-badge.app_focus{background:#1e2e3a;color:#7dd3fc}
.event-badge.apps_installed{background:#1e3a3a;color:#5eead4}
.event-badge.chrome_download{background:#3a1e2e;color:#fca5a5}
.event-badge.phone_call{background:#1e3a1e;color:#86efac;font-weight:700}
.event-badge.device_boot{background:#3a3a1e;color:#fde047}

/* ALERT SEVERITY BADGES */
.severity-critical{color:#ef4444;font-weight:700}
.severity-warning{color:#f59e0b;font-weight:600}
.severity-info{color:#3b82f6}
.alert-source-badge{font-size:0.6rem;padding:1px 5px;border-radius:3px;margin-left:4px;font-weight:600}
.alert-source-badge.source-keyword{background:#3a3a1e;color:#fde047}
.alert-source-badge.source-anomaly{background:#3a1e1e;color:#fca5a5}
.alert-source-badge.source-category{background:#1e1e3a;color:#a5b4fc}
.alert-source-badge.source-watchdog{background:#1e3a2e;color:#86efac}

/* RISK SCORE */
.risk-score{display:inline-flex;align-items:center;justify-content:center;width:36px;height:36px;border-radius:10px;font-size:0.75rem;font-weight:700;color:white;box-shadow:0 2px 8px rgba(0,0,0,.3)}
.risk-low{background:linear-gradient(135deg,#22c55e 0%,#16a34a 100%);box-shadow:0 2px 8px rgba(34,197,94,.3)}
.risk-medium{background:linear-gradient(135deg,#f59e0b 0%,#d97706 100%);box-shadow:0 2px 8px rgba(245,158,11,.3)}
.risk-high{background:linear-gradient(135deg,#ef4444 0%,#dc2626 100%);box-shadow:0 2px 8px rgba(239,68,68,.3)}

/* TABLET */
@media(max-width:1200px){
  :root{--sidebar-w:200px}
  .main-content{padding:1.25rem 1.5rem}
  .stats-grid{grid-template-columns:repeat(auto-fit,minmax(150px,1fr))}
}

/* MOBILE */
@media(max-width:768px){
  :root{--sidebar-w:0px}
  .sidebar{position:fixed;left:-260px;width:260px;min-width:260px;transition:left .3s ease;z-index:100;box-shadow:4px 0 24px rgba(0,0,0,.5)}
  .sidebar.open{left:0}
  .sidebar-overlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,.5);z-index:99}
  .sidebar-overlay.show{display:block}
  .main-content{margin-left:0;padding:1rem;width:100%}
  .page-header{flex-direction:column;align-items:flex-start;gap:0.5rem}
  .page-header h1{font-size:1.2rem}
  .filters-inline{width:100%;margin-left:0;flex-wrap:wrap}
  .filters-inline select,.filters-inline input{flex:1;min-width:120px}
  .two-cols{grid-template-columns:1fr}
  .stats-grid{grid-template-columns:repeat(2,1fr);gap:0.5rem}
  .stat-card{padding:0.75rem}
  .stat-value{font-size:1.3rem}
  .devices-grid{grid-template-columns:1fr}
  .photos-grid{grid-template-columns:repeat(auto-fill,minmax(140px,1fr))}
  .msg-tabs{overflow-x:auto;flex-wrap:nowrap;-webkit-overflow-scrolling:touch}
  .msg-tab{white-space:nowrap;flex-shrink:0;font-size:0.8rem;padding:0.4rem 0.75rem}
  .conv-card-messages{max-height:300px}
  .event-row{flex-wrap:wrap;gap:0.25rem}
  .event-time{width:100%;text-align:left;padding-left:0}
  .url-row{flex-wrap:wrap}
  #map-container{height:calc(100vh - 80px)!important;min-height:400px!important}
  .mobile-menu-btn{display:flex!important}
}

/* MOBILE MENU BUTTON */
.mobile-menu-btn{display:none;position:fixed;top:0.75rem;left:0.75rem;z-index:101;width:40px;height:40px;border-radius:10px;background:var(--surface);border:1px solid var(--border);align-items:center;justify-content:center;cursor:pointer;font-size:1.2rem;color:var(--text)}

/* ═══════════════════════════════════════════════════════════════════════════════
   NOTIFICATIONS TEMPS RÉEL - STYLE PREMIUM
   ═══════════════════════════════════════════════════════════════════════════════ */

/* Container des notifications */
.notif-container{position:fixed;top:1rem;right:1rem;z-index:500;display:flex;flex-direction:column;gap:0.5rem;max-width:400px;pointer-events:none}

/* Notification individuelle */
.notif-toast{background:linear-gradient(145deg,var(--surface) 0%,var(--surface2) 100%);border:1px solid var(--border);border-radius:var(--radius-lg);padding:1rem 1.25rem;display:flex;align-items:flex-start;gap:1rem;box-shadow:var(--shadow-lg),0 0 30px rgba(0,0,0,.3);animation:notifSlideIn .4s cubic-bezier(.68,-.55,.27,1.55);pointer-events:auto;cursor:pointer;transition:all .2s ease;position:relative;overflow:hidden}
.notif-toast:hover{transform:translateX(-4px);border-color:var(--accent)}
.notif-toast.closing{animation:notifSlideOut .3s ease forwards}

/* Barre de couleur latérale selon le type */
.notif-toast::before{content:'';position:absolute;left:0;top:0;bottom:0;width:4px}
.notif-toast.notif-message::before{background:linear-gradient(180deg,#25d366,#128c7e)}
.notif-toast.notif-location::before{background:linear-gradient(180deg,#3b82f6,#1d4ed8)}
.notif-toast.notif-alert::before{background:linear-gradient(180deg,#ef4444,#b91c1c)}
.notif-toast.notif-photo::before{background:linear-gradient(180deg,#a855f7,#7c3aed)}
.notif-toast.notif-call::before{background:linear-gradient(180deg,#22c55e,#16a34a)}
.notif-toast.notif-geofence::before{background:linear-gradient(180deg,#f59e0b,#d97706)}

/* Icône de notification */
.notif-icon{font-size:1.8rem;flex-shrink:0;animation:notifPulse 2s ease-in-out infinite}

/* Contenu */
.notif-content{flex:1;min-width:0}
.notif-title{font-weight:700;font-size:0.9rem;color:var(--text);margin-bottom:2px}
.notif-body{font-size:0.8rem;color:var(--text-muted);line-height:1.4;word-break:break-word}
.notif-meta{display:flex;align-items:center;gap:8px;margin-top:6px;font-size:0.7rem;color:var(--text-dim)}
.notif-device{background:var(--surface3);padding:2px 6px;border-radius:4px;font-weight:600}
.notif-time{opacity:0.7}

/* Bouton fermer */
.notif-close{position:absolute;top:6px;right:8px;background:none;border:none;color:var(--text-dim);cursor:pointer;font-size:1rem;opacity:0.5;transition:opacity .15s}
.notif-close:hover{opacity:1}

/* Animations */
@keyframes notifSlideIn{from{transform:translateX(120%);opacity:0}to{transform:translateX(0);opacity:1}}
@keyframes notifSlideOut{from{transform:translateX(0);opacity:1}to{transform:translateX(120%);opacity:0}}
@keyframes notifPulse{0%,100%{transform:scale(1)}50%{transform:scale(1.1)}}

/* Badge clignotant pour nouvelles alertes */
.alert-badge.pulse{animation:badgePulse 1s ease-in-out infinite}
@keyframes badgePulse{0%,100%{transform:scale(1);box-shadow:0 0 0 0 rgba(239,68,68,.4)}50%{transform:scale(1.1);box-shadow:0 0 0 8px rgba(239,68,68,0)}}

/* Indicateur temps réel dans la sidebar */
.live-indicator{display:inline-flex;align-items:center;gap:6px;font-size:0.7rem;color:var(--success);font-weight:600}
.live-dot{width:8px;height:8px;background:var(--success);border-radius:50%;animation:livePulse 1.5s ease-in-out infinite}
@keyframes livePulse{0%,100%{opacity:1;box-shadow:0 0 0 0 rgba(34,197,94,.4)}50%{opacity:0.7;box-shadow:0 0 0 6px rgba(34,197,94,0)}}

/* Son d'alerte (indicateur visuel) */
.sound-wave{display:inline-flex;align-items:center;gap:2px;height:16px}
.sound-wave span{width:3px;background:var(--accent);border-radius:2px;animation:soundWave 0.8s ease-in-out infinite}
.sound-wave span:nth-child(1){height:40%;animation-delay:0s}
.sound-wave span:nth-child(2){height:70%;animation-delay:0.1s}
.sound-wave span:nth-child(3){height:100%;animation-delay:0.2s}
.sound-wave span:nth-child(4){height:70%;animation-delay:0.3s}
.sound-wave span:nth-child(5){height:40%;animation-delay:0.4s}
@keyframes soundWave{0%,100%{transform:scaleY(0.5)}50%{transform:scaleY(1)}}

/* ═══════════════════════════════════════════════════════════════════════════════
   REPLAY GPS - STYLE PREMIUM
   ═══════════════════════════════════════════════════════════════════════════════ */

.replay-controls{background:linear-gradient(145deg,var(--surface) 0%,var(--surface2) 100%);border:1px solid var(--border);border-radius:var(--radius-lg);padding:1rem 1.5rem;margin-bottom:1rem;box-shadow:var(--shadow-md)}
.replay-progress{margin-bottom:0.75rem}
.replay-progress input[type="range"]{width:100%;height:8px;border-radius:4px;background:var(--surface3);appearance:none;cursor:pointer}
.replay-progress input[type="range"]::-webkit-slider-thumb{appearance:none;width:20px;height:20px;border-radius:50%;background:linear-gradient(135deg,var(--accent),#4c8dff);box-shadow:0 2px 8px rgba(88,166,255,.4);cursor:pointer;transition:transform .15s}
.replay-progress input[type="range"]::-webkit-slider-thumb:hover{transform:scale(1.2)}
.replay-info{display:flex;justify-content:space-between;align-items:center;margin-top:0.5rem;font-size:0.8rem}
#replay-time{font-weight:700;color:var(--accent);font-family:ui-monospace,monospace}
#replay-speed{background:var(--surface3);padding:2px 8px;border-radius:4px;font-weight:600;color:var(--purple)}
#replay-address{color:var(--text-muted);max-width:50%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.replay-buttons{display:flex;gap:0.5rem;flex-wrap:wrap}
.replay-buttons .btn{padding:0.4rem 0.8rem;font-size:0.75rem}

/* Marqueur animé sur la carte */
.animated-marker{width:20px;height:20px;background:linear-gradient(135deg,#ef4444,#b91c1c);border-radius:50%;border:3px solid white;box-shadow:0 2px 10px rgba(239,68,68,.5);animation:markerPulse 1.5s ease-in-out infinite}
@keyframes markerPulse{0%,100%{transform:scale(1);box-shadow:0 2px 10px rgba(239,68,68,.5)}50%{transform:scale(1.2);box-shadow:0 4px 20px rgba(239,68,68,.7)}}

/* Ligne de trajet */
.trajectory-line{stroke:var(--accent);stroke-width:4;stroke-linecap:round;stroke-linejoin:round;fill:none;filter:drop-shadow(0 2px 4px rgba(88,166,255,.3))}

/* Numéro de téléphone dans les conversations */
.conv-card-phone{font-size:0.75rem;color:var(--text-muted);margin-left:0.5rem;font-weight:400;opacity:0.8}
.conv-card-name{font-weight:600;color:var(--text)}

/* Icône de localisation personnalisée */
.custom-marker{background:transparent !important;border:none !important}
